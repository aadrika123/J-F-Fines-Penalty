import{r as n,a as $,j as t}from"./index-1352a43a.js";import{L as z}from"./ListTableConnect-14ed40b2.js";import{c as P,a as E,u as G}from"./formik.esm-8913ab00.js";import{R as U}from"./index.esm-d8d7cccf.js";import{R as B}from"./Hourglass-e7efad9c.js";import{P as O}from"./ProjectApiList-269fe0dc.js";import{g,n as o,d as I}from"./PowerupFunctions-ec23c1b8.js";import{u as M}from"./useSetTitle-5701960a.js";import{A as W}from"./AxiosInterceptors-e92c6b9d.js";import{A as J}from"./ApiHeader-6d683756.js";import"./index-4a660516.js";import"./index-4fab56d5.js";import"./index.esm-7e41f982.js";import"./iconBase-d7889296.js";import"./index.esm-56d14e56.js";import"./ShimmerEffectInline-10d4c968.js";import"./FileSaver.min-0cce4b4d.js";const ue=()=>{M("Challan Generated Report");const{api_ChallanGeneratingReport:m,api_getUserList:y}=O(),[b,w]=n.useState([]),j=$(),v=[{Header:"Sl.No.",Cell:({row:e})=>t.jsx("div",{children:(e==null?void 0:e.index)+1})},{Header:"Officer Name",accessor:"user_name",Cell:({cell:e})=>{var a;return o((a=e.row.original)==null?void 0:a.user_name)}},{Header:"Name",accessor:"full_name",Cell:({cell:e})=>{var a;return o((a=e.row.original)==null?void 0:a.full_name)}},{Header:"Mobile No.",accessor:"mobile",Cell:({cell:e})=>{var a;return o((a=e.row.original)==null?void 0:a.mobile)}},{Header:"Challan Type",accessor:"challan_type",Cell:({cell:e})=>{var a;return o((a=e.row.original)==null?void 0:a.challan_type)}},{Header:"Challan Category",accessor:"challan_category",Cell:({cell:e})=>{var a;return o((a=e.row.original)==null?void 0:a.challan_category)}},{Header:"Challan No",accessor:"challan_no",Cell:({cell:e})=>{var a;return t.jsx("div",{className:"underline cursor-pointer",onClick:()=>{var r,i,c,d;return((i=(r=e==null?void 0:e.row)==null?void 0:r.original)==null?void 0:i.challan_id)&&j(`/challan/${(d=(c=e==null?void 0:e.row)==null?void 0:c.original)==null?void 0:d.challan_id}`)},children:o((a=e.row.original)==null?void 0:a.challan_no)})}},{Header:"Violation Made",accessor:"violation_name",Cell:({cell:e})=>{var a;return o((a=e.row.original)==null?void 0:a.violation_name)}},{Header:"Violation Section",accessor:"violation_section",Cell:({cell:e})=>{var a;return o((a=e.row.original)==null?void 0:a.violation_section)}},{Header:"Violation Place",accessor:"violation_place",Cell:({cell:e})=>{var a;return o((a=e.row.original)==null?void 0:a.violation_place)}},{Header:"Penalty Amount",accessor:"total_amount",Cell:({cell:e})=>{var a,r,i;return t.jsx(t.Fragment,{children:t.jsx("span",{className:`${(r=(a=e==null?void 0:e.row)==null?void 0:a.original)!=null&&r.payment_status?"bg-green-500":"bg-red-400"} text-white px-2 py-0.5 drop-shadow-md`,children:I((i=e.row.original)==null?void 0:i.total_amount)})})}}],[u,C]=n.useState({}),[N,_]=n.useState(0),[S,D]=n.useState(!1),[H,h]=n.useState(!1),L="text-gray-800 text-sm",x="border focus:outline-none drop-shadow-sm focus:drop-shadow-md px-4 py-1 text-gray-700 shadow-black placeholder:text-sm",l=[{title:"From Date",key:"fromDate",width:"md:w-[20%] w-full",type:"date",hint:"",required:!0,options:"",okey:"",ovalue:""},{title:"Upto Date",key:"uptoDate",width:"md:w-[20%] w-full",type:"date",hint:"",required:!0,options:"",okey:"",ovalue:""},{title:"Users",key:"users",width:"md:w-[20%] w-full",type:"select",hint:"Enter your name",options:b,okey:"id",ovalue:"user_name"},{title:"Challan Type",key:"challanType",width:"md:w-[20%] w-full",type:"select",hint:"Enter your name",options:[{id:"Via Verification",value:"Via Verification"},{id:"On Spot",value:"On Spot"}],okey:"id",ovalue:"value"}],R=(e,a="",r,i="",c="",d=!1,p=[],V="",q="")=>t.jsxs("div",{className:`flex flex-col ${i} `,children:[a!=""&&t.jsxs("label",{htmlFor:e,className:L,children:[a," ",d&&t.jsx("span",{className:"text-red-500 text-xs font-bold",children:"*"})," : "]}),r!="select"&&r!="file"&&t.jsx("input",{...s.getFieldProps(e),type:r,className:x+` ${s.touched[e]&&s.errors[e]?" border-red-200 placeholder:text-red-400 ":" focus:border-zinc-300 border-zinc-200"}`,name:e,id:"",placeholder:c}),r=="select"&&t.jsx("select",{...s.getFieldProps(e),className:x+` ${s.touched[e]&&s.errors[e]?" border-red-200 placeholder:text-red-400 text-red-400":" focus:border-zinc-300 border-zinc-200 "}`,children:H?t.jsx("option",{children:"Loading..."}):t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"",children:"All"}),p==null?void 0:p.map(f=>t.jsx("option",{className:"",value:f[V],children:f[q]}))]})})]}),k=P().shape([...l].reduce((e,a)=>(a!=null&&a.required&&(e[a.key]=E().required(a==null?void 0:a.hint)),e),{})),F={fromDate:g(),uptoDate:g(),users:"",challanType:"",challanCategory:""},s=G({initialValues:F,enableReinitialize:!0,validationSchema:k,onSubmit:e=>{T(e)}}),A=()=>{h(!0),W.post(y,{},J()).then(e=>{var a,r;(a=e==null?void 0:e.data)!=null&&a.status&&w((r=e==null?void 0:e.data)==null?void 0:r.data)}).catch(e=>{}).finally(()=>{h(!1)})},T=e=>{C({fromDate:e==null?void 0:e.fromDate,uptoDate:e==null?void 0:e.uptoDate,userId:e==null?void 0:e.users,challanType:e==null?void 0:e.challanType}),_(a=>a+1)};return n.useEffect(()=>{A()},[]),t.jsxs(t.Fragment,{children:[t.jsxs("form",{onSubmit:s.handleSubmit,onChange:s.handleChange,className:"bg-white poppins p-4 mb-8",children:[t.jsx("h1",{className:"text-xl font-semibold uppercase text-center text-gray-700 border-b border-gray-400 mb-4 pb-1",children:"Challan Generated Report"}),t.jsxs("section",{className:"flex gap-4 flex-wrap my-6",children:[l==null?void 0:l.map(e=>R(e==null?void 0:e.key,e==null?void 0:e.title,e==null?void 0:e.type,e==null?void 0:e.width,e==null?void 0:e.hint,e==null?void 0:e.required,e==null?void 0:e.options,e==null?void 0:e.okey,e==null?void 0:e.ovalue)),t.jsx("div",{className:"mt-4 w-full md:w-[30%] flex flex-row flex-wrap items-center gap-x-4 gap-y-2 md:mt-4",children:t.jsx("div",{className:" ",children:S?t.jsx(t.Fragment,{children:t.jsx("div",{className:"flex justify-center",children:t.jsx(B,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})})}):t.jsxs("button",{type:"submit",className:" flex items-center border border-green-600 bg-green-500 hover:bg-green-600 text-white shadow-md rounded-sm  text-sm px-5 py-1",children:[t.jsx("span",{className:"",children:t.jsx(U,{fontSize:""})}),t.jsx("span",{children:"Search Record"})]})})})]})]}),u!=null&&t.jsx("div",{className:"relative",children:t.jsx(z,{api:m,columns:v,requestBody:u,changeData:N,search:!1,loader:e=>D(e)})})]})};export{ue as default};
